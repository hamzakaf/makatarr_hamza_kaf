<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title> Ù„Ø¹Ø¨Ø© Ù…Ù‚Ø·Ø§Ø± </title>
<style>
    /* Ø§Ù„Ø£Ù†Ù…Ø§Ø· (CSS) */
    body {
        background: linear-gradient(to bottom, #f7f2e8, #eae3d2);
        font-family: 'Tahoma', sans-serif;
        text-align: center;
        padding: 0; 
        overflow-x: hidden;
        position: relative;
        min-height: 100vh;
        margin: 0; 
    }

    /* Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø¹Ù„ÙˆÙŠ */
    .note-bar {
        background-color: #C2B280; 
        color: #333;
        padding: 10px 20px; 
        font-size: 0.9em; 
        font-weight: bold;
        text-align: center;
        width: 100%;
        box-sizing: border-box; 
        position: relative; 
        z-index: 100; 
        line-height: 1.5; 
    }

    .note-bar .highlight-note {
        color: red; 
    }

    h3 {
        color: #375233;
        font-size: 20px;
        margin-bottom: 20px;
        display: block;
    }

    .top-boxes {
        display: flex;
        justify-content: center;
        gap: 25px;
        margin: 25px 0;
        margin-top: 80px;
    }

    .top-boxes div {
        width: 120px;
        height: 90px;
        line-height: 90px;
        border-radius: 14px;
        font-weight: bold;
        font-size: 36px;
        color: white; 
        display: flex; 
        flex-direction: column; 
        align-items: center;
        justify-content: center;
        position: relative; 
    }

    .top-boxes div .team-name-display {
        position: absolute;
        top: -75px; 
        font-size: 0.9em; 
        color: black; 
        font-weight: bold;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        white-space: nowrap; 
    }

    .top-boxes div span:last-child {
        font-size: 1.2em; 
        display: block; 
        line-height: 1; 
    }

    .box-1 { background-color: #99ccff; }
    .box-2 { background-color: #ffe066; }
    .box-3 { background-color: #a8e6a3; }

    .grid {
        display: grid;
        grid-template-columns: repeat(8, 90px);
        grid-template-rows: repeat(8, 90px);
        gap: 12px;
        justify-content: center;
        position: relative; 
        z-index: 10;
    }

    .cell {
        background-color: white;
        border: 2px solid #a0a087;
        border-radius: 14px;
        cursor: pointer;
        font-size: 38px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
    }

    .corner {
        pointer-events: none;
        background-color: #C2B280 !important;
        font-size: 48px;
        transform: rotate(180deg);
    }

    .buttons {
        margin-top: 50px;
        display: flex;
        justify-content: center;
        gap: 40px;
    }

    button {
        padding: 24px 40px;
        font-size: 26px;
        color: white;
        border: none;
        border-radius: 14px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        background-color: #C2B280; 
    }

    button:hover {
        background-color: #4f7044;
    }

    .firework {
        position: absolute;
        width: 12px;
        height: 12px;
        background-color: gold;
        border-radius: 50%;
        animation: explode 1s ease-out forwards;
        z-index: 999;
    }

    @keyframes explode {
        0% { transform: scale(1); opacity: 1; }
        100% { transform: scale(3); opacity: 0; }
    }

    .congrats-text {
        position: fixed;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 90px;
        color: black;
        font-weight: bold;
        display: none;
        z-index: 1000;
        text-shadow: 1px 1px 3px #888;
    }

    .falling-shape {
        position: absolute;
        top: -50px; 
        width: 30px;
        height: 30px;
        background-color: transparent; 
        border-radius: 50%; 
        z-index: 1; 
        opacity: 0.6; 
        animation: fall linear infinite;
    }

    .falling-star {
        clip-path: polygon(
            50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%,
            50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%
        );
        background-color: #a67c00;
    }

    .falling-circle {
        border-radius: 50%;
        background-color: #c19a6b;
    }

    @keyframes fall {
        0% { transform: translateY(-50px) translateX(0) rotate(0deg); opacity: 0.6; }
        100% { transform: translateY(110vh) translateX(calc(-10% + (var(--random-x) * 120%))) rotate(360deg); opacity: 0.6; }
    }

    .popup-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1001;
    }

    .game-instructions-popup {
        background: white;
        padding: 30px 40px;
        border-radius: 20px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        max-width: 600px;
        text-align: center;
        position: relative;
        font-size: 20px;
        color: #333;
        max-height: 85vh;
        overflow-y: auto;
    }

    .game-instructions-popup h2 {
        color: #375233;
        font-size: 38px;
        margin-bottom: 25px;
    }

    .game-instructions-popup p {
        margin-bottom: 15px;
        line-height: 1.6;
        font-size: 22px;
        text-align: justify;
        text-align-last: right;
    }

    .game-instructions-popup ul {
        list-style: none;
        padding: 0;
        text-align: right;
        margin: 20px 0;
    }

    .game-instructions-popup ul li {
        margin-bottom: 10px;
        font-size: 22px;
    }

    .game-instructions-popup button {
        background-color: #375233;
        color: white;
        padding: 15px 30px;
        font-size: 22px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        margin-top: 20px;
        transition: background-color 0.3s ease;
    }

    .game-instructions-popup button:hover {
        background-color: #4f7044;
    }
    .advice-list {
        list-style-type: arabic-indic;
        padding-right: 25px;
        text-align: right;
    }
    .advice-list li {
        font-size: 22px;
        margin-bottom: 10px;
    }

    .naming-overlay {
        display: none; 
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(62, 95, 83, 0.7); 
        backdrop-filter: blur(2px); 
        justify-content: center;
        align-items: center;
        z-index: 1000; 
    }
    .naming-overlay-content {
        background-color: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        text-align: center;
        width: 90%;
        max-width: 450px;
    }
    .naming-overlay-content h2 {
        color: #375233;
        margin-bottom: 25px;
        font-size: 2em;
    }
    .naming-overlay-content input[type="text"] {
        display: block;
        width: calc(100% - 20px); 
        padding: 12px;
        margin-bottom: 15px;
        border: 1px solid #ccc;
        border-radius: 8px;
        font-size: 1.1em;
        text-align: right; 
        direction: rtl; 
    }
    .naming-overlay-content button {
        padding: 12px 25px;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1.1em;
        margin-top: 15px;
    }
    .naming-overlay-content button:hover {
        background-color: #45a049;
    }
</style>
</head>
<body>

<div class="note-bar">
    <span class="highlight-note">Ù…Ù„Ø§Ø­Ø¸Ø©:</span> Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø³Ø®Ø© Ù„Ø´Ø®Øµ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· ÙˆØªØ§Ø¨Ø¹Ø© Ù„Ù…ØªØ¬Ø± Ù‡Ù…Ø²Ø© ÙƒØ§Ù Ù„Ø°Ù„Ùƒ Ù‡ÙŠ ØºÙŠØ± Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù†Ø´Ø± Ø£Ùˆ Ø§Ù„Ø¨ÙŠØ¹ ÙˆÙ…Ù† ÙŠØ®Ø§Ù„Ù Ø°Ù„Ùƒ Ø³ÙŠØªÙ… Ø§ØªØ®Ø§Ø° Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø± ÙˆÙ„Ù„ØªØ°ÙƒÙŠØ± Ø¨Ø°Ù…ØªÙƒ ÙˆØ£Ù…Ø§Ù†ØªÙƒ:
    "Ù‚Ø§Ù„ ï·º "Ù„Ø§ Ø¥ÙŠÙ…Ø§Ù† Ù„Ù…Ù† Ù„Ø§ Ø£Ù…Ø§Ù†Ø© Ù„Ù‡ØŒ ÙˆÙ„Ø§ Ø¯ÙŠÙ† Ù„Ù…Ù† Ù„Ø§ Ø¹Ù‡Ø¯ Ù„Ù‡"
</div>

<div class="top-boxes">
    <div class="box-1" id="teamBox0">
        <span class="team-name-display" id="teamName0"></span>
        <span>Ù </span>
    </div>
    <div class="box-2" id="teamBox1">
        <span class="team-name-display" id="teamName1"></span>
        <span>Ù </span>
    </div>
    <div class="box-3" id="teamBox2">
        <span class="team-name-display" id="teamName2"></span>
        <span>Ù </span>
    </div>
</div>

<div class="grid" id="grid"></div>

<div class="buttons">
    <button onclick="resetGrid()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
    <button onclick="showNamingOverlay()">ØªØ³Ù…ÙŠØ© Ø§Ù„ÙØ±Ù‚</button>
</div>

<div id="congratsText" class="congrats-text"></div>

<audio id="clapSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_3b5bb8f3b4.mp3"></audio>

<div id="instructionsPopupOverlay" class="popup-overlay" style="display: none;">

    <div id="popup1" class="game-instructions-popup">
        <h2>Ù†ØµÙŠØ­Ø© Ø¹Ù„Ø´Ø§Ù† Ù†Ù„Ø¹Ø¨ ÙˆÙ†Ø³ØªØ§Ù†Ø³â€¦ Ø¨Ø³ Ø¨Ø¯ÙˆÙ† Ù…Ø§ Ù†Ù†Ø³Ù‰ Ø§Ù„Ø£Ù‡Ù… </h2>
        <ul class="advice-list">
            <li>Ù¡. â° "Ø§Ù„Ù„Ø¹Ø¨ Ù…Ù…ØªØ¹ØŒ Ø¨Ø³ Ø®Ù„Ù‘Ù‡ Ø¨Ø¹Ø¯ Ø§Ù„ØµÙ„Ø§Ø©ØŒ Ø¹Ø´Ø§Ù† Ù…Ø§ ØªØ¶ÙŠØ¹ Ø¹Ù„ÙŠÙƒ ÙØ±Ø¶"</li>
            <li>Ù¢. ğŸ“– "Ø§Ù„Ù„Ø¹Ø¨Ø© Ø­Ù„ÙˆØ©ØŒ Ø¨Ø³ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø£Ø­Ù„Ù‰ØŒ Ø®Ø° Ù„Ùƒ ÙˆÙ‚Øª Ø¨ÙŠÙ† Ø§Ù„Ø¬ÙˆÙ„Ø§Øª ÙˆØ§Ø±ØªÙ‘Ø­ Ù…Ø¹ ÙƒÙ„Ø§Ù… Ø§Ù„Ù„Ù‡."</li>
            <li>Ù£. ğŸ™ "Ø¥Ø°Ø§ Ø¬Ø§Ø¡ ÙˆÙ‚Øª Ø§Ù„ØµÙ„Ø§Ø©ØŒ Ù†ÙˆÙ‚Ù Ø§Ù„Ù„Ø¹Ø¨ ÙˆÙ†ÙƒØ³Ø¨ Ø±Ø¶Ø§ Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠÙ†."</li>
            <li>Ù¤. âœ‹ "Ù†Ù„Ø¹Ø¨ ÙˆÙ†Ø¶Ø­ÙƒØŒ Ù„ÙƒÙ† Ù…Ø§ Ù†Ø®Ù„ÙŠ Ø§Ù„Ù„Ø¹Ø¨ ÙŠÙ„Ù‡ÙŠÙ†Ø§ Ø¹Ù† Ø·Ø§Ø¹Ø© Ø§Ù„Ù„Ù‡."</li>
            <li>Ù¥. ğŸ“š "Ø§Ù„Ù„Ø¹Ø¨ Ù…Ø§ ÙŠÙ…Ù†Ø¹ Ø¥Ù†Ùƒ ØªØ°Ø§ÙƒØ±ØŒ Ù†Ø¸Ù‘Ù… ÙˆÙ‚ØªÙƒ ÙˆØ®Ù„Ù‘ Ø§Ù„Ù„Ø¹Ø¨ Ù…ÙƒØ§ÙØ£Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²."</li>
            <li>Ù¦. ğŸ¯ "Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¬Ø²Ø¡ Ù…Ù† ÙŠÙˆÙ…Ù†Ø§ØŒ Ù…Ùˆ ÙƒÙ„ ÙŠÙˆÙ…Ù†Ø§â€¦ Ù„Ø§ ØªÙ†Ø³Ù‰ Ø£Ù‡Ø¯Ø§ÙÙƒ ÙˆØ·Ù…ÙˆØ­Ø§ØªÙƒ."</li>
            <li>Ù§. âŒ› "ÙˆÙ‚Øª Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø© ØºØ§Ù„ÙŠØŒ Ù„Ø§ ØªØ®Ù„ÙŠÙ‡ ÙŠØ¶ÙŠØ¹ Ø¹Ù„Ù‰ Ø­Ø³Ø§Ø¨ Ù„Ø¹Ø¨Ø© Ù…Ù…ÙƒÙ† ØªÙ„Ø¹Ø¨Ù‡Ø§ Ø¨Ø£ÙŠ ÙˆÙ‚Øª."</li>
        </ul>
        <p>ØªØ°ÙƒØ± <strong>"Ø¥Ø°Ø§ Ù„Ø¹Ø¨Øª ÙˆØ§Ù†Øª Ù…Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ ØµÙ„Ø§ØªÙƒ ÙˆØ§Ø°ÙƒØ§Ø±Ùƒ ÙˆÙ‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù‚Ø±Ø§Ù† ÙˆØ®Ù„ØµØª Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ù‡ ÙˆØ§Ù„Ø§Ø´ØºØ§Ù„ Ø§Ù„ÙŠ Ø¹Ù„ÙŠÙƒ â€¦ Ø£Ù†Øª ÙƒØ³Ø¨Øª Ø§Ù„Ø¯Ù†ÙŠØ§ ÙˆØ§Ù„Ø¢Ø®Ø±Ø© Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡"</strong></p>
        <button onclick="showNextPopup(2)">Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>

    <div id="popup2" class="game-instructions-popup" style="display: none;">
        <h2>ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù„Ø¹Ø¨Ø© Ù…Ù‚Ø·Ø§Ø±</h2>
        <h3>â–  ÙÙƒØ±Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©:</h3>
        <p>Ù„Ø¹Ø¨Ø© "Ù…Ù‚Ø·Ø§Ø±" Ù‡ÙŠ ØªØ­Ø¯ÙÙ‘ Ø¨ÙŠÙ† Ù„Ø§Ø¹Ø¨ÙŠÙ† (2-3) Ø£Ùˆ ÙØ±ÙŠÙ‚ÙŠÙ† (2-3)ØŒ Ø§Ù„Ù‡Ø¯Ù ÙÙŠÙ‡Ø§ Ù‡Ùˆ ØªÙƒÙˆÙŠÙ† Ù…Ù‚Ø·Ø§Ø±ÙŠÙ† Ø¯Ø§Ø®Ù„ Ø´Ø¨ÙƒØ© Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª. ÙƒÙ„ Ù…Ù‚Ø·Ø§Ø± ÙŠØªÙƒÙˆÙ† Ù…Ù† Ù¤ Ù…Ø±Ø¨Ø¹Ø§Øª Ù…ØªØ¬Ø§ÙˆØ±Ø© Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù„ÙˆÙ†.</p>
        <h3>â–  Ø´Ø±ÙˆØ· Ø§Ù„ÙÙˆØ²:</h3>
        <ul>
            <li>1- ÙŠÙÙˆØ² Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø£Ùˆ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø°ÙŠ ÙŠØªÙ…ÙƒÙ† Ø£ÙˆÙ„Ù‹Ø§ Ù…Ù† ØªÙƒÙˆÙŠÙ† Ù…Ù‚Ø·Ø§Ø±ÙŠÙ†.</li>
            <li>2- Ø§Ù„Ù…Ù‚Ø·Ø§Ø±Ø§Ù† Ù„Ø§ ÙŠØ¬ÙˆØ² Ø£Ù† ÙŠØ´ØªØ±ÙƒØ§ ÙÙŠ Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø±Ø¨Ø¹ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·.</li>
            <li>3- Ø§Ù„Ø²ÙˆØ§ÙŠØ§ ØªØ¹ØªØ¨Ø± Ù†Ù‚Ø·Ø© Ù…Ø­Ø§ÙŠØ¯Ø© ÙŠÙ…ÙƒÙ† Ù„Ù„Ø¬Ù…ÙŠØ¹ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§.</li>
        </ul>
        <button onclick="closeInstructionsPopup()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
    </div>

</div>

<div id="namingOverlay" class="naming-overlay">
    <div class="naming-overlay-content">
        <h2>ØªØ³Ù…ÙŠØ© Ø§Ù„ÙØ±Ù‚</h2>
        <input type="text" id="inputTeam0" placeholder="Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„ (Ø§Ù„Ø£Ø²Ø±Ù‚)">
        <input type="text" id="inputTeam1" placeholder="Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ (Ø§Ù„Ø£ØµÙØ±)">
        <input type="text" id="inputTeam2" placeholder="Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù„Ø« (Ø§Ù„Ø£Ø®Ø¶Ø±)">
        <button id="saveTeamNamesBtn">Ø­ÙØ¸ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡</button>
    </div>
</div>

<script>
    const colors = ["white", "#99ccff", "#ffe066", "#a8e6a3"];
    const grid = document.getElementById("grid");
    const rows = 8;
    const cols = 8;
    const cornerCellIndices = [0, cols - 1, rows * cols - cols, rows * cols - 1];
    const gridData = new Array(rows * cols).fill(0); 
    let currentPopupIndex = 1;

    const namingOverlay = document.getElementById('namingOverlay');
    const saveTeamNamesBtn = document.getElementById('saveTeamNamesBtn');
    const teamNameDisplays = [
        document.getElementById('teamName0'),
        document.getElementById('teamName1'),
        document.getElementById('teamName2')
    ];
    const teamInputFields = [
        document.getElementById('inputTeam0'),
        document.getElementById('inputTeam1'),
        document.getElementById('inputTeam2')
    ];

    function indexToRC(index) { return { row: Math.floor(index / cols), col: index % cols }; }
    function rcToIndex(r, c) { return r * cols + c; }

    for (let i = 0; i < rows * cols; i++) {
        const cell = document.createElement("div");
        cell.className = "cell";
        if (cornerCellIndices.includes(i)) {
            cell.classList.add("corner");
            cell.textContent = "â–²"; 
        } else {
            cell.dataset.index = i;
            cell.onclick = (event) => {
                const cellIndex = parseInt(event.target.dataset.index);
                let currentIndex = gridData[cellIndex];
                let nextIndex = (currentIndex + 1) % colors.length;
                gridData[cellIndex] = nextIndex;
                event.target.style.backgroundColor = colors[nextIndex];
                checkForCongrats();
            };
        }
        grid.appendChild(cell);
    }

    function isFullLineCornerToCorner(targetColorIndex) {
        for (let r = 0; r < rows; r++) {
            let allCellsMatch = true;
            for (let c = 0; c < cols; c++) {
                const idx = rcToIndex(r, c);
                if (!cornerCellIndices.includes(idx) && gridData[idx] !== targetColorIndex) {
                    allCellsMatch = false; break;
                }
            }
            if (allCellsMatch) return true;
        }
        for (let c = 0; c < cols; c++) {
            let allCellsMatch = true;
            for (let r = 0; r < rows; r++) {
                const idx = rcToIndex(r, c);
                if (!cornerCellIndices.includes(idx) && gridData[idx] !== targetColorIndex) {
                    allCellsMatch = false; break;
                }
            }
            if (allCellsMatch) return true;
        }
        return false;
    }

    function checkForCongrats() {
        let finalCounts = [0, 0, 0, 0];
        for (let t = 1; t <= 3; t++) {
            if (isFullLineCornerToCorner(t)) finalCounts[t] = 2;
            else {
                // ØªØ¨Ø³ÙŠØ· Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØ­Ù‚Ù‚ Ù„Ù„Ù…Ø«Ø§Ù„
                let count = 0; 
                finalCounts[t] = count; 
            }
            document.getElementById(`teamBox${t-1}`).querySelector('span:last-child').textContent = finalCounts[t].toString();
        }
        // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚ Ø§Ù„ÙÙˆØ² Ù‡Ù†Ø§
    }

    function resetGrid() {
        for (let i = 0; i < rows * cols; i++) {
            if (!cornerCellIndices.includes(i)) {
                gridData[i] = 0;
                grid.children[i].style.backgroundColor = colors[0];
            }
        }
        document.getElementById('teamBox0').querySelector('span:last-child').textContent = 'Ù ';
        document.getElementById('teamBox1').querySelector('span:last-child').textContent = 'Ù ';
        document.getElementById('teamBox2').querySelector('span:last-child').textContent = 'Ù ';
    }

    function showNextPopup(nextIndex) {
        document.getElementById('popup' + currentPopupIndex).style.display = 'none';
        document.getElementById('popup' + nextIndex).style.display = 'block';
        currentPopupIndex = nextIndex;
    }

    function closeInstructionsPopup() {
        document.getElementById("instructionsPopupOverlay").style.display = "none";
    }

    function createFallingShape() {
        const shapeDiv = document.createElement('div');
        shapeDiv.classList.add('falling-shape', Math.random() > 0.5 ? 'falling-star' : 'falling-circle');
        shapeDiv.style.left = Math.random() * 100 + 'vw';
        shapeDiv.style.setProperty('--random-x', Math.random());
        shapeDiv.style.animationDuration = (Math.random() * 10 + 10) + 's';
        document.body.appendChild(shapeDiv);
    }

    function startFallingShapes() { for (let i = 0; i < 8; i++) createFallingShape(); }

    function showNamingOverlay() { namingOverlay.style.display = 'flex'; }
    saveTeamNamesBtn.addEventListener('click', () => {
        teamInputFields.forEach((input, index) => {
            teamNameDisplays[index].textContent = input.value.trim();
        });
        namingOverlay.style.display = 'none';
    });

    window.onload = () => {
        document.getElementById("instructionsPopupOverlay").style.display = "flex";
        startFallingShapes();
    };
</script>
</body>
</html>
